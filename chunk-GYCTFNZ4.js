import{k as r}from"./chunk-3EH3MU74.js";import{Ba as h,T as o,Y as i,oa as a,ra as c,tc as m}from"./chunk-HNLZOKXJ.js";var d="familyops-theme",f=class n{platformId=i(h);_themePreference=a(this.getStoredTheme());_systemPrefersDark=a(this.getSystemPreference());themePreference=this._themePreference.asReadonly();systemPrefersDark=this._systemPrefersDark.asReadonly();isDarkMode=m(()=>{let e=this._themePreference();return e==="system"?this._systemPrefersDark():e==="dark"});currentTheme=m(()=>this.isDarkMode()?"dark":"light");constructor(){r(this.platformId)&&(this.setupSystemPreferenceListener(),this.applyTheme(),c(()=>{this.applyTheme()}))}setTheme(e){this._themePreference.set(e),this.storeTheme(e)}toggleTheme(){let e=this.isDarkMode()?"light":"dark";this.setTheme(e)}cycleTheme(){let e=this._themePreference(),t=["light","dark","system"],l=(t.indexOf(e)+1)%t.length;this.setTheme(t[l])}applyTheme(){if(!r(this.platformId))return;let e=this.currentTheme(),t=document.documentElement;t.removeAttribute("data-theme"),t.setAttribute("data-theme",e);let s=document.querySelector('meta[name="theme-color"]');s&&s.setAttribute("content",e==="dark"?"#1e1e1e":"#ffffff")}getStoredTheme(){if(!r(this.platformId))return"system";let e=localStorage.getItem(d);return e==="light"||e==="dark"||e==="system"?e:"system"}storeTheme(e){r(this.platformId)&&localStorage.setItem(d,e)}getSystemPreference(){return r(this.platformId)?window.matchMedia("(prefers-color-scheme: dark)").matches:!1}setupSystemPreferenceListener(){if(!r(this.platformId))return;let e=window.matchMedia("(prefers-color-scheme: dark)"),t=s=>{this._systemPrefersDark.set(s.matches)};e.addEventListener?e.addEventListener("change",t):e.addListener(t)}getThemeIcon(){switch(this._themePreference()){case"light":return"light_mode";case"dark":return"dark_mode";case"system":return"contrast";default:return"contrast"}}getThemeLabel(){switch(this._themePreference()){case"light":return"\u05D1\u05D4\u05D9\u05E8";case"dark":return"\u05DB\u05D4\u05D4";case"system":return"\u05DE\u05E2\u05E8\u05DB\u05EA";default:return"\u05DE\u05E2\u05E8\u05DB\u05EA"}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=o({token:n,factory:n.\u0275fac,providedIn:"root"})};export{f as a};
