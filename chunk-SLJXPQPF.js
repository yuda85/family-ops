import{a as B}from"./chunk-II7H6DAW.js";import{a as Ee,b as Se,c as Oe,d as Te}from"./chunk-DBA5HZUL.js";import{a as be,c as Pe}from"./chunk-T3S3PSFS.js";import{a as Me,b as De,c as xe,g as j}from"./chunk-PKSSNXGP.js";import"./chunk-ES7NJO36.js";import{a as fe,c as Ce,d as he}from"./chunk-BFWFC2UO.js";import{a as pe,d as ue,e as ge,h as _e}from"./chunk-DNCMLEWE.js";import{a as ye,b as ve,c as ke,d as we}from"./chunk-PHBB3HXL.js";import"./chunk-BUPX7NXY.js";import"./chunk-JCYEYCY7.js";import"./chunk-O6HJ35IU.js";import"./chunk-KMKHW2SX.js";import"./chunk-RJL43Y7W.js";import{f as ie}from"./chunk-HS2XTPUM.js";import{b as le,f as de,i as se,o as ce,q as me}from"./chunk-FSRTV3VH.js";import"./chunk-QJJTVXVB.js";import{a as oe,b as re,d as A}from"./chunk-X4QG5DAP.js";import{a as U,b as z,d as R,e as N,f as L}from"./chunk-SXGBHULN.js";import{U as te,V as ne}from"./chunk-EB5YHKWW.js";import{j as ae}from"./chunk-JFU3JZIN.js";import{i as ee}from"./chunk-TWWUOU6R.js";import{i as Z,k as W}from"./chunk-OJNKK6II.js";import{$b as F,Ab as v,Bb as f,Cb as a,Db as i,Eb as x,Lb as E,Pb as C,Qa as G,Rb as m,Sa as l,Y as h,ac as O,ba as p,bc as I,ca as u,dc as r,ec as k,fb as V,fc as b,ic as w,jc as M,kc as D,nc as J,oa as P,pc as Q,qc as X,uc as T,vb as g,wb as _,yb as K,zb as y}from"./chunk-QZLPLYI5.js";import{a as H,b as q,f as S}from"./chunk-ATWMZ64T.js";var Y=(t,n)=>n.id;function Ne(t,n){if(t&1&&(a(0,"mat-option",14)(1,"div",23),x(2,"span",24),r(3),i()()),t&2){let e=n.$implicit;f("value",e.id),l(2),O("background",e.color),l(),b(" ",e.labelHe," ")}}function Le(t,n){if(t&1&&(a(0,"mat-option",14)(1,"div",25),x(2,"span",26),r(3),i()()),t&2){let e=n.$implicit;f("value",e.id),l(2),O("background",e.color),l(),b(" ",e.name," ")}}function Be(t,n){if(t&1&&(a(0,"mat-option",14),r(1),i()),t&2){let e=n.$implicit;f("value",e.id),l(),k(e.displayName)}}function je(t,n){t&1&&(a(0,"mat-icon",22),r(1,"sync"),i())}var $=class t{dialogRef=h(Me);data=h(De,{optional:!0});transportationService=h(B);familyService=h(A);categories=oe;children=this.familyService.sortedChildren;members=this.familyService.members;title="";date=this.data?.date??new Date;startTime="16:00";endTime="";category="activity";selectedChildrenIds=[];location="";driverUserId=null;notes="";_isSaving=P(!1);isSaving=this._isSaving.asReadonly();isValid(){return this.title.trim().length>0&&!!this.date&&this.startTime.length>0}close(){this.dialogRef.close()}save(){return S(this,null,function*(){if(this.isValid()){this._isSaving.set(!0);try{let[n,e]=this.startTime.split(":").map(Number),o=new Date(this.date);o.setHours(n,e,0,0);let d;if(this.endTime){let[Ie,We]=this.endTime.split(":").map(Number);d=new Date(this.date),d.setHours(Ie,We,0,0)}let c={title:this.title.trim(),date:this.date,startTime:o,endTime:d,category:this.category,childrenIds:this.selectedChildrenIds,location:this.location.trim()||void 0,driverUserId:this.driverUserId||void 0,notes:this.notes.trim()||void 0},s=yield this.transportationService.createStandaloneTask(c);this.dialogRef.close({success:!0,taskId:s})}catch(n){console.error("Error creating task:",n)}finally{this._isSaving.set(!1)}}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-add-task-dialog"]],decls:64,vars:14,consts:[["datePicker",""],[1,"dialog-container"],[1,"dialog-header"],["mat-icon-button","",3,"click"],[1,"dialog-content"],["appearance","outline",1,"full-width"],["matInput","","required","","placeholder","\u05DC\u05DE\u05E9\u05DC: \u05D0\u05D9\u05E1\u05D5\u05E3 \u05DE\u05DB\u05D3\u05D5\u05E8\u05D2\u05DC",3,"ngModelChange","ngModel"],["matInput","","required","",3,"ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],[1,"time-row"],["appearance","outline"],["matInput","","type","time","required","",3,"ngModelChange","ngModel"],["matInput","","type","time",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[3,"value"],["multiple","",3,"ngModelChange","ngModel"],["matInput","","placeholder","\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D5 \u05E9\u05DD \u05DE\u05E7\u05D5\u05DD",3,"ngModelChange","ngModel"],["matPrefix",""],["matInput","","rows","2",3,"ngModelChange","ngModel"],[1,"dialog-actions"],["mat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"],[1,"spin"],[1,"category-option"],[1,"category-dot"],[1,"child-option"],[1,"child-dot"]],template:function(e,o){if(e&1){let d=E();a(0,"div",1)(1,"div",2)(2,"h2"),r(3,"\u05D4\u05D5\u05E1\u05E4\u05EA \u05DE\u05E9\u05D9\u05DE\u05EA \u05D4\u05E1\u05E2\u05D4"),i(),a(4,"button",3),C("click",function(){return p(d),u(o.close())}),a(5,"mat-icon"),r(6,"close"),i()()(),a(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),r(10,"\u05DB\u05D5\u05EA\u05E8\u05EA"),i(),a(11,"input",6),D("ngModelChange",function(s){return p(d),M(o.title,s)||(o.title=s),u(s)}),i()(),a(12,"mat-form-field",5)(13,"mat-label"),r(14,"\u05EA\u05D0\u05E8\u05D9\u05DA"),i(),a(15,"input",7),D("ngModelChange",function(s){return p(d),M(o.date,s)||(o.date=s),u(s)}),i(),x(16,"mat-datepicker-toggle",8)(17,"mat-datepicker",null,0),i(),a(19,"div",9)(20,"mat-form-field",10)(21,"mat-label"),r(22,"\u05E9\u05E2\u05EA \u05D4\u05EA\u05D7\u05DC\u05D4"),i(),a(23,"input",11),D("ngModelChange",function(s){return p(d),M(o.startTime,s)||(o.startTime=s),u(s)}),i()(),a(24,"mat-form-field",10)(25,"mat-label"),r(26,"\u05E9\u05E2\u05EA \u05E1\u05D9\u05D5\u05DD (\u05D0\u05D5\u05E4\u05E6\u05D9\u05D5\u05E0\u05DC\u05D9)"),i(),a(27,"input",12),D("ngModelChange",function(s){return p(d),M(o.endTime,s)||(o.endTime=s),u(s)}),i()()(),a(28,"mat-form-field",5)(29,"mat-label"),r(30,"\u05E7\u05D8\u05D2\u05D5\u05E8\u05D9\u05D4"),i(),a(31,"mat-select",13),D("ngModelChange",function(s){return p(d),M(o.category,s)||(o.category=s),u(s)}),y(32,Ne,4,4,"mat-option",14,Y),i()(),a(34,"mat-form-field",5)(35,"mat-label"),r(36,"\u05D9\u05DC\u05D3\u05D9\u05DD"),i(),a(37,"mat-select",15),D("ngModelChange",function(s){return p(d),M(o.selectedChildrenIds,s)||(o.selectedChildrenIds=s),u(s)}),y(38,Le,4,4,"mat-option",14,Y),i()(),a(40,"mat-form-field",5)(41,"mat-label"),r(42,"\u05DE\u05D9\u05E7\u05D5\u05DD (\u05D0\u05D5\u05E4\u05E6\u05D9\u05D5\u05E0\u05DC\u05D9)"),i(),a(43,"input",16),D("ngModelChange",function(s){return p(d),M(o.location,s)||(o.location=s),u(s)}),i(),a(44,"mat-icon",17),r(45,"place"),i()(),a(46,"mat-form-field",5)(47,"mat-label"),r(48,"\u05E0\u05D4\u05D2 (\u05D0\u05D5\u05E4\u05E6\u05D9\u05D5\u05E0\u05DC\u05D9)"),i(),a(49,"mat-select",13),D("ngModelChange",function(s){return p(d),M(o.driverUserId,s)||(o.driverUserId=s),u(s)}),a(50,"mat-option",14),r(51,"\u05DC\u05DC\u05D0 \u05E9\u05D9\u05D1\u05D5\u05E5"),i(),y(52,Be,2,2,"mat-option",14,Y),i()(),a(54,"mat-form-field",5)(55,"mat-label"),r(56,"\u05D4\u05E2\u05E8\u05D5\u05EA (\u05D0\u05D5\u05E4\u05E6\u05D9\u05D5\u05E0\u05DC\u05D9)"),i(),a(57,"textarea",18),D("ngModelChange",function(s){return p(d),M(o.notes,s)||(o.notes=s),u(s)}),i()()(),a(58,"div",19)(59,"button",20),C("click",function(){return p(d),u(o.close())}),r(60,"\u05D1\u05D9\u05D8\u05D5\u05DC"),i(),a(61,"button",21),C("click",function(){return p(d),u(o.save())}),g(62,je,2,0,"mat-icon",22),r(63," \u05E9\u05DE\u05D5\u05E8 "),i()()()}if(e&2){let d=F(18);l(11),w("ngModel",o.title),l(4),f("matDatepicker",d),w("ngModel",o.date),l(),f("for",d),l(7),w("ngModel",o.startTime),l(4),w("ngModel",o.endTime),l(4),w("ngModel",o.category),l(),v(o.categories),l(5),w("ngModel",o.selectedChildrenIds),l(),v(o.children()),l(5),w("ngModel",o.location),l(6),w("ngModel",o.driverUserId),l(),f("value",null),l(2),v(o.members()),l(5),w("ngModel",o.notes),l(4),f("disabled",!o.isValid()||o.isSaving()),l(),_(o.isSaving()?62:-1)}},dependencies:[W,me,le,de,ce,se,j,R,z,U,L,N,fe,_e,pe,ue,ge,he,Ce,Pe,be,ie,Te,Ee,Se,Oe],styles:['.dialog-container[_ngcontent-%COMP%]{min-width:400px;max-width:500px}@media(max-width:600px){.dialog-container[_ngcontent-%COMP%]{min-width:auto;width:100%}}.dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.5rem;border-bottom:1px solid var(--border-subtle)}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-family:"Rubik",var(--font-family-display);font-size:1.1rem;font-weight:600;color:var(--text-primary)}.dialog-content[_ngcontent-%COMP%]{padding:1.5rem;display:flex;flex-direction:column;gap:.5rem}.full-width[_ngcontent-%COMP%]{width:100%}.time-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.category-option[_ngcontent-%COMP%], .child-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.category-dot[_ngcontent-%COMP%], .child-dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem;padding:1rem 1.5rem;border-top:1px solid var(--border-subtle)}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']})};var $e=()=>[1,2,3,4,5,6,7],He=(t,n)=>n.dateKey,qe=(t,n)=>n.task.id,Fe=(t,n)=>n.id;function Ge(t,n){t&1&&(a(0,"span",7),r(1,"\u05D4\u05E9\u05D1\u05D5\u05E2"),i())}function Ye(t,n){if(t&1){let e=E();a(0,"button",17),C("click",function(){p(e);let d=m();return u(d.goToCurrentWeek())}),a(1,"mat-icon"),r(2,"today"),i(),r(3," \u05D4\u05E9\u05D1\u05D5\u05E2 "),i()}}function Ke(t,n){t&1&&x(0,"div",19)}function Je(t,n){t&1&&(a(0,"div",15)(1,"div",18),y(2,Ke,1,0,"div",19,K),i()()),t&2&&(l(2),v(J(0,$e)))}function Qe(t,n){if(t&1&&(a(0,"span",25),r(1),i()),t&2){let e=m().$implicit;l(),k(e.unassignedTasks)}}function Xe(t,n){t&1&&(a(0,"div",27)(1,"mat-icon"),r(2,"event_available"),i(),a(3,"span"),r(4,"\u05D0\u05D9\u05DF \u05D4\u05E1\u05E2\u05D5\u05EA"),i()())}function Ze(t,n){if(t&1&&(a(0,"span",33)(1,"mat-icon"),r(2,"place"),i(),r(3),i()),t&2){let e=m().$implicit;l(3),b(" ",e.task.location," ")}}function et(t,n){if(t&1&&(a(0,"span",44),r(1),i()),t&2){let e=n.$implicit;O("background",e.color),l(),b(" ",e.name.charAt(0)," ")}}function tt(t,n){if(t&1&&(a(0,"div",34),y(1,et,2,3,"span",43,Fe),i()),t&2){let e=m().$implicit;l(),v(e.children)}}function nt(t,n){if(t&1&&x(0,"img",46),t&2){let e=m(2).$implicit;f("src",e.driver.photoURL,G)("alt",e.driver.displayName)}}function it(t,n){if(t&1&&r(0),t&2){let e=m(2).$implicit;b(" ",e.driver.displayName.charAt(0)," ")}}function at(t,n){if(t&1&&(a(0,"span",45),g(1,nt,1,2,"img",46)(2,it,1,1),i(),a(3,"span",47),r(4),i()),t&2){let e=m().$implicit;l(),_(e.driver.photoURL?1:2),l(3),k(e.driver.displayName)}}function ot(t,n){t&1&&(a(0,"span",36)(1,"mat-icon"),r(2,"warning"),i(),a(3,"span"),r(4,"\u05DC\u05D0 \u05DE\u05E9\u05D5\u05D1\u05E5"),i()())}function rt(t,n){if(t&1&&x(0,"img",46),t&2){let e=m().$implicit;f("src",e.photoURL,G)("alt",e.displayName)}}function lt(t,n){if(t&1&&r(0),t&2){let e=m().$implicit;b(" ",e.displayName.charAt(0)," ")}}function dt(t,n){t&1&&(a(0,"mat-icon",49),r(1,"check"),i())}function st(t,n){if(t&1){let e=E();a(0,"button",38),C("click",function(){let d=p(e).$implicit,c=m().$implicit,s=m(4);return u(s.assignDriver(c.task.id,d.id))}),a(1,"span",48),g(2,rt,1,2,"img",46)(3,lt,1,1),i(),a(4,"span"),r(5),i(),g(6,dt,2,0,"mat-icon",49),i()}if(t&2){let e=n.$implicit,o=m().$implicit;I("selected",o.task.driverUserId===e.id),l(2),_(e.photoURL?2:3),l(3),k(e.displayName),l(),_(o.task.driverUserId===e.id?6:-1)}}function ct(t,n){if(t&1){let e=E();a(0,"button",50),C("click",function(d){p(e);let c=m().$implicit;return m(4).markComplete(c.task.id),u(d.stopPropagation())}),a(1,"mat-icon"),r(2,"check_circle"),i()()}}function mt(t,n){t&1&&(a(0,"div",42)(1,"mat-icon"),r(2,"check_circle"),i()())}function pt(t,n){if(t&1){let e=E();a(0,"div",29)(1,"div",30),r(2),i(),a(3,"div",31)(4,"span",32),r(5),i(),g(6,Ze,4,1,"span",33),i(),g(7,tt,3,0,"div",34),a(8,"div",35),g(9,at,5,2)(10,ot,5,0,"span",36),a(11,"mat-icon",37),r(12,"arrow_drop_down"),i()(),a(13,"mat-menu",null,0)(15,"button",38),C("click",function(){let d=p(e).$implicit,c=m(4);return u(c.assignDriver(d.task.id,null))}),a(16,"mat-icon"),r(17,"person_off"),i(),a(18,"span"),r(19,"\u05DC\u05DC\u05D0 \u05E9\u05D9\u05D1\u05D5\u05E5"),i()(),x(20,"div",39),y(21,st,7,5,"button",40,Fe),i(),g(23,ct,3,0,"button",41)(24,mt,3,0,"div",42),i()}if(t&2){let e=n.$implicit,o=F(14),d=m(4);O("--category-color",d.getCategoryColor(e.task.category)),I("unassigned",!e.task.driverUserId)("mine",e.isCurrentUserDriver)("completed",e.task.status==="completed"),l(2),b(" ",d.formatTime(e.task.startTime.toDate())," "),l(3),k(e.task.title),l(),_(e.task.location?6:-1),l(),_(e.children.length>0?7:-1),l(),f("matMenuTriggerFor",o),l(),_(e.driver?9:10),l(12),v(d.familyMembers()),l(2),_(e.task.status!=="completed"?23:24)}}function ut(t,n){if(t&1&&y(0,pt,25,15,"div",28,qe),t&2){let e=m().$implicit;v(e.tasks)}}function gt(t,n){if(t&1&&(a(0,"div",21)(1,"div",22)(2,"span",23),r(3),i(),a(4,"span",24),r(5),Q(6,"date"),i(),g(7,Qe,2,1,"span",25),i(),a(8,"div",26),g(9,Xe,5,0,"div",27)(10,ut,2,0),i()()),t&2){let e=n.$implicit;I("is-today",e.isToday)("is-tomorrow",e.isTomorrow),l(3),k(e.dayName),l(2),k(X(6,8,e.date,"d")),l(2),_(e.unassignedTasks>0?7:-1),l(2),_(e.tasks.length===0?9:10)}}function _t(t,n){if(t&1&&(a(0,"div",16),y(1,gt,11,11,"div",20,He),i()),t&2){let e=m();l(),v(e.filteredDays())}}var Ve=class t{transportationService=h(B);familyService=h(A);authService=h(ae);dialog=h(xe);_weekStartDate=P(this.transportationService.getWeekStart(new Date));_showOnlyUnassigned=P(!1);_showOnlyMine=P(!1);_weekDays=P([]);showOnlyUnassigned=this._showOnlyUnassigned.asReadonly();showOnlyMine=this._showOnlyMine.asReadonly();familyMembers=T(()=>this.familyService.members());weekRangeLabel=T(()=>{let n=this._weekStartDate(),e=new Date(n);e.setDate(e.getDate()+6);let o=n.toLocaleDateString("he-IL",{day:"numeric",month:"short"}),d=e.toLocaleDateString("he-IL",{day:"numeric",month:"short"});return`${o} - ${d}`});isCurrentWeek=T(()=>{let n=this.transportationService.getWeekStart(new Date);return this._weekStartDate().getTime()===n.getTime()});filteredDays=T(()=>{let n=this._weekDays(),e=this._showOnlyUnassigned(),o=this._showOnlyMine();return!e&&!o?n:n.map(d=>q(H({},d),{tasks:d.tasks.filter(c=>e&&o?!c.task.driverUserId||c.isCurrentUserDriver:e?!c.task.driverUserId:o?c.isCurrentUserDriver:!0)})).map(d=>q(H({},d),{totalTasks:d.tasks.length,assignedTasks:d.tasks.filter(c=>c.task.driverUserId).length,unassignedTasks:d.tasks.filter(c=>!c.task.driverUserId).length}))});ngOnInit(){this.loadWeek()}loadWeek(){return S(this,null,function*(){let n=yield this.transportationService.buildWeekView(this._weekStartDate());this._weekDays.set(n)})}previousWeek(){let n=new Date(this._weekStartDate());n.setDate(n.getDate()-7),this._weekStartDate.set(n),this.loadWeek()}nextWeek(){let n=new Date(this._weekStartDate());n.setDate(n.getDate()+7),this._weekStartDate.set(n),this.loadWeek()}goToCurrentWeek(){this._weekStartDate.set(this.transportationService.getWeekStart(new Date)),this.loadWeek()}toggleUnassignedFilter(){this._showOnlyUnassigned.update(n=>!n)}toggleMineFilter(){this._showOnlyMine.update(n=>!n)}assignDriver(n,e){return S(this,null,function*(){try{yield this.transportationService.assignDriver(n,e),yield this.loadWeek()}catch(o){console.error("Error assigning driver:",o)}})}markComplete(n){return S(this,null,function*(){try{yield this.transportationService.updateTaskStatus(n,"completed"),yield this.loadWeek()}catch(e){console.error("Error marking complete:",e)}})}openAddTaskDialog(){this.dialog.open($,{data:{date:this._weekStartDate()},panelClass:"custom-dialog"}).afterClosed().subscribe(e=>{e?.success&&this.loadWeek()})}getCategoryColor(n){return re(n).color}formatTime(n){return n.toLocaleTimeString("he-IL",{hour:"2-digit",minute:"2-digit"})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-planner-view"]],decls:34,vars:6,consts:[["driverMenu","matMenu"],[1,"planner"],[1,"planner-header"],[1,"header-nav"],["mat-icon-button","",1,"nav-btn",3,"click"],[1,"week-label"],[1,"week-range"],[1,"current-week-badge"],[1,"header-actions"],["mat-stroked-button","",1,"today-btn"],["mat-flat-button","","color","primary",1,"add-btn",3,"click"],[1,"filter-bar"],[1,"filter-checkbox"],["type","checkbox",3,"change","checked"],[1,"checkbox-label"],[1,"loading-container"],[1,"week-grid"],["mat-stroked-button","",1,"today-btn",3,"click"],[1,"skeleton-grid"],[1,"skeleton-column"],[1,"day-column",3,"is-today","is-tomorrow"],[1,"day-column"],[1,"day-header"],[1,"day-name"],[1,"day-date"],[1,"unassigned-badge"],[1,"day-tasks"],[1,"empty-day"],[1,"task-card",3,"unassigned","mine","completed","--category-color"],[1,"task-card"],[1,"task-time"],[1,"task-content"],[1,"task-title"],[1,"task-location"],[1,"task-children"],[1,"task-driver",3,"matMenuTriggerFor"],[1,"unassigned-indicator"],[1,"dropdown-arrow"],["mat-menu-item","",3,"click"],[1,"menu-divider"],["mat-menu-item","",3,"selected"],["matRipple","",1,"complete-btn"],[1,"completed-indicator"],[1,"child-badge",3,"background"],[1,"child-badge"],[1,"driver-avatar"],[3,"src","alt"],[1,"driver-name"],[1,"member-avatar"],[1,"check-icon"],["matRipple","",1,"complete-btn",3,"click"]],template:function(e,o){e&1&&(a(0,"div",1)(1,"header",2)(2,"div",3)(3,"button",4),C("click",function(){return o.previousWeek()}),a(4,"mat-icon"),r(5,"chevron_right"),i()(),a(6,"div",5)(7,"span",6),r(8),i(),g(9,Ge,2,0,"span",7),i(),a(10,"button",4),C("click",function(){return o.nextWeek()}),a(11,"mat-icon"),r(12,"chevron_left"),i()()(),a(13,"div",8),g(14,Ye,4,0,"button",9),a(15,"button",10),C("click",function(){return o.openAddTaskDialog()}),a(16,"mat-icon"),r(17,"add"),i(),r(18," \u05D4\u05D5\u05E1\u05E3 \u05DE\u05E9\u05D9\u05DE\u05D4 "),i()()(),a(19,"div",11)(20,"label",12)(21,"input",13),C("change",function(){return o.toggleUnassignedFilter()}),i(),a(22,"span",14)(23,"mat-icon"),r(24,"warning"),i(),r(25," \u05E8\u05E7 \u05DC\u05D0 \u05DE\u05E9\u05D5\u05D1\u05E6\u05D9\u05DD "),i()(),a(26,"label",12)(27,"input",13),C("change",function(){return o.toggleMineFilter()}),i(),a(28,"span",14)(29,"mat-icon"),r(30,"person"),i(),r(31," \u05E8\u05E7 \u05E9\u05DC\u05D9 "),i()()(),g(32,Je,4,1,"div",15)(33,_t,3,0,"div",16),i()),e&2&&(l(8),k(o.weekRangeLabel()),l(),_(o.isCurrentWeek()?9:-1),l(5),_(o.isCurrentWeek()?-1:14),l(7),f("checked",o.showOnlyUnassigned()),l(6),f("checked",o.showOnlyMine()),l(5),_(o.transportationService.isLoading()?32:33))},dependencies:[W,ee,L,N,R,z,U,ne,te,we,ve,ye,ke,j,Z],styles:['.planner[_ngcontent-%COMP%]{min-height:100%;padding-bottom:2rem;animation:_ngcontent-%COMP%_fadeIn .4s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}.planner-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:.75rem;margin-bottom:1rem;padding:.75rem 1rem;background:var(--surface-primary);border:1px solid var(--border-subtle);border-radius:1rem}.header-nav[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.nav-btn[_ngcontent-%COMP%]{color:var(--text-secondary)}.nav-btn[_ngcontent-%COMP%]:hover{color:var(--color-primary)}.week-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;min-width:180px;justify-content:center}.week-range[_ngcontent-%COMP%]{font-family:"Rubik",var(--font-family-display);font-size:1rem;font-weight:600;color:var(--text-primary)}.current-week-badge[_ngcontent-%COMP%]{font-size:.7rem;font-weight:500;padding:.125rem .5rem;background:var(--color-primary-alpha);color:var(--color-primary);border-radius:1rem}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.today-btn[_ngcontent-%COMP%]{font-size:.8rem;gap:.25rem}.today-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.add-btn[_ngcontent-%COMP%]{font-size:.8rem;gap:.25rem}.add-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.filter-bar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1rem;padding:.5rem 1rem;background:var(--surface-secondary);border-radius:.75rem}.filter-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.375rem;cursor:pointer;-webkit-user-select:none;user-select:none}.filter-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:16px;height:16px;accent-color:var(--color-primary)}.filter-checkbox[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;font-size:.8rem;color:var(--text-secondary)}.filter-checkbox[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.loading-container[_ngcontent-%COMP%]{padding:1rem 0}.skeleton-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:.75rem}.skeleton-column[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--surface-secondary) 25%,var(--surface-hover) 50%,var(--surface-secondary) 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:1rem;height:400px}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:200% 0}to{background-position:-200% 0}}.week-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:.75rem;overflow-x:auto;padding-bottom:.5rem}@media(max-width:1024px){.week-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(7,minmax(140px,1fr))}}.day-column[_ngcontent-%COMP%]{background:var(--surface-primary);border:1px solid var(--border-subtle);border-radius:1rem;min-height:400px;display:flex;flex-direction:column;transition:all .2s ease}.day-column[_ngcontent-%COMP%]:hover{border-color:var(--border-default)}.day-column.is-today[_ngcontent-%COMP%]{border-color:var(--color-primary);box-shadow:0 0 0 1px var(--color-primary-alpha)}.day-column.is-today[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]{background:var(--color-primary-alpha);border-color:transparent}.day-column.is-today[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-name[_ngcontent-%COMP%], .day-column.is-today[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]   .day-date[_ngcontent-%COMP%]{color:var(--color-primary)}.day-column.is-tomorrow[_ngcontent-%COMP%]   .day-header[_ngcontent-%COMP%]{background:var(--surface-secondary)}.day-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.375rem;padding:.75rem;border-bottom:1px solid var(--border-subtle);position:relative}.day-name[_ngcontent-%COMP%]{font-family:"Rubik",var(--font-family-display);font-size:.9rem;font-weight:600;color:var(--text-primary)}.day-date[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary)}.unassigned-badge[_ngcontent-%COMP%]{position:absolute;top:.5rem;left:.5rem;width:18px;height:18px;background:var(--color-warning, #f59e0b);color:#fff;border-radius:50%;font-size:.7rem;font-weight:600;display:flex;align-items:center;justify-content:center}.day-tasks[_ngcontent-%COMP%]{flex:1;padding:.5rem;display:flex;flex-direction:column;gap:.5rem;overflow-y:auto}.day-tasks[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.day-tasks[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.day-tasks[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-subtle);border-radius:2px}.empty-day[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem 1rem;color:var(--text-tertiary);text-align:center;flex:1}.empty-day[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;margin-bottom:.5rem;opacity:.5}.empty-day[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem}.task-card[_ngcontent-%COMP%]{background:var(--surface-secondary);border-radius:.75rem;padding:.625rem;border-right:3px solid var(--category-color, var(--color-primary));transition:all .2s ease;position:relative}.task-card[_ngcontent-%COMP%]:hover{background:var(--surface-hover);transform:translate(-2px)}.task-card.unassigned[_ngcontent-%COMP%]{background:#f59e0b14;border-right-color:var(--color-warning, #f59e0b)}.task-card.mine[_ngcontent-%COMP%]{background:var(--color-primary-alpha)}.task-card.completed[_ngcontent-%COMP%]{opacity:.6}.task-card.completed[_ngcontent-%COMP%]   .task-title[_ngcontent-%COMP%]{text-decoration:line-through}.task-time[_ngcontent-%COMP%]{font-size:.7rem;font-weight:600;color:var(--text-secondary);margin-bottom:.25rem}.task-content[_ngcontent-%COMP%]{margin-bottom:.375rem}.task-title[_ngcontent-%COMP%]{display:block;font-size:.8rem;font-weight:500;color:var(--text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.task-location[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.125rem;font-size:.7rem;color:var(--text-tertiary);margin-top:.125rem}.task-location[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:12px;width:12px;height:12px}.task-children[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;margin-bottom:.375rem}.child-badge[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;color:#fff;display:flex;align-items:center;justify-content:center;font-family:"Rubik",var(--font-family-display);font-weight:600;font-size:.65rem}.task-driver[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.375rem;padding:.375rem .5rem;background:var(--surface-primary);border-radius:.5rem;cursor:pointer;transition:all .2s ease}.task-driver[_ngcontent-%COMP%]:hover{background:var(--surface-hover)}.driver-avatar[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:50%;background:var(--color-primary);color:#fff;display:flex;align-items:center;justify-content:center;font-size:.7rem;font-weight:600;overflow:hidden}.driver-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.driver-name[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-primary);flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.unassigned-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;color:var(--color-warning, #f59e0b);font-size:.75rem;flex:1}.unassigned-indicator[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.dropdown-arrow[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:var(--text-tertiary)}.complete-btn[_ngcontent-%COMP%]{position:absolute;top:.375rem;left:.375rem;width:24px;height:24px;border:none;background:transparent;cursor:pointer;padding:0;border-radius:50%;display:flex;align-items:center;justify-content:center;color:var(--text-tertiary);transition:all .2s ease}.complete-btn[_ngcontent-%COMP%]:hover{color:var(--color-success, #10b981);background:var(--color-success-alpha, rgba(16, 185, 129, .1))}.complete-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.completed-indicator[_ngcontent-%COMP%]{position:absolute;top:.375rem;left:.375rem;color:var(--color-success, #10b981)}.completed-indicator[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.menu-divider[_ngcontent-%COMP%]{height:1px;background:var(--border-subtle);margin:.25rem 0}.member-avatar[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;background:var(--color-primary);color:#fff;display:flex;align-items:center;justify-content:center;font-size:.75rem;font-weight:600;margin-left:.5rem;overflow:hidden}.member-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.check-icon[_ngcontent-%COMP%]{margin-right:auto;color:var(--color-primary)}@media(max-width:768px){.planner-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.header-nav[_ngcontent-%COMP%], .header-actions[_ngcontent-%COMP%]{justify-content:center}.week-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(7,minmax(120px,1fr))}.day-column[_ngcontent-%COMP%]{min-height:300px}.skeleton-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(7,minmax(120px,1fr))}}']})};export{Ve as PlannerViewComponent};
