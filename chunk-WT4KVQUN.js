import{a as J}from"./chunk-UAW6TWS3.js";import{a as z,b as B,c as N}from"./chunk-EI4X5JRH.js";import"./chunk-DNCMLEWE.js";import{a as j,b as q,c as G,d as H}from"./chunk-PHBB3HXL.js";import"./chunk-JCYEYCY7.js";import{a as L,b as $}from"./chunk-2RBDTNNC.js";import"./chunk-FSRTV3VH.js";import"./chunk-QJJTVXVB.js";import{d as k}from"./chunk-X4QG5DAP.js";import{a as T,b as V,d as I,e as R,f as A}from"./chunk-SXGBHULN.js";import"./chunk-EB5YHKWW.js";import{j as O}from"./chunk-JFU3JZIN.js";import{c as F}from"./chunk-TWWUOU6R.js";import{k as P}from"./chunk-OJNKK6II.js";import{$b as h,Ab as M,Bb as E,Cb as t,Db as i,Eb as y,Lb as b,Pb as d,Rb as m,Sa as l,Y as C,ba as c,bc as S,ca as s,dc as a,ec as w,fb as v,fc as g,vb as _,wb as D,zb as x}from"./chunk-QZLPLYI5.js";import{f}from"./chunk-ATWMZ64T.js";var Q=(r,n)=>n.id;function U(r,n){if(r&1){let e=b();t(0,"button",7),d("click",function(){c(e);let u=m();return s(u.inviteMember())}),t(1,"mat-icon"),a(2,"person_add"),i(),a(3," \u05D4\u05D6\u05DE\u05DF \u05D7\u05D1\u05E8 "),i()}}function W(r,n){r&1&&(t(0,"span",12),a(1,"(\u05D0\u05EA/\u05D4)"),i())}function X(r,n){if(r&1){let e=b();t(0,"button",15)(1,"mat-icon"),a(2,"more_vert"),i()(),t(3,"mat-menu",null,0)(5,"button",16),d("click",function(){c(e);let u=m().$implicit,p=m(2);return s(p.changeRole(u.id,"admin"))}),t(6,"mat-icon"),a(7,"admin_panel_settings"),i(),t(8,"span"),a(9,"\u05D4\u05E4\u05D5\u05DA \u05DC\u05DE\u05E0\u05D4\u05DC"),i()(),t(10,"button",16),d("click",function(){c(e);let u=m().$implicit,p=m(2);return s(p.changeRole(u.id,"member"))}),t(11,"mat-icon"),a(12,"person"),i(),t(13,"span"),a(14,"\u05D4\u05E4\u05D5\u05DA \u05DC\u05D7\u05D1\u05E8"),i()(),t(15,"button",16),d("click",function(){c(e);let u=m().$implicit,p=m(2);return s(p.changeRole(u.id,"viewer"))}),t(16,"mat-icon"),a(17,"visibility"),i(),t(18,"span"),a(19,"\u05D4\u05E4\u05D5\u05DA \u05DC\u05E6\u05D5\u05E4\u05D4"),i()(),y(20,"mat-divider"),t(21,"button",17),d("click",function(){c(e);let u=m().$implicit,p=m(2);return s(p.removeMember(u.id))}),t(22,"mat-icon"),a(23,"person_remove"),i(),t(24,"span"),a(25,"\u05D4\u05E1\u05E8 \u05DE\u05D4\u05DE\u05E9\u05E4\u05D7\u05D4"),i()()()}if(r&2){let e=h(4);E("matMenuTriggerFor",e)}}function Y(r,n){if(r&1&&(t(0,"div",8)(1,"div",9),a(2),i(),t(3,"div",10)(4,"div",11),a(5),_(6,W,2,0,"span",12),i(),t(7,"div",13),a(8),i()(),t(9,"mat-chip-set")(10,"mat-chip",14),a(11),i()(),_(12,X,26,1),i()),r&2){let e=n.$implicit,o=m(2);l(),S("current-user",e.id===o.authService.userId()),l(),g(" ",o.getInitials(e.displayName)," "),l(3),g(" ",e.displayName," "),l(),D(e.id===o.authService.userId()?6:-1),l(2),w(e.email),l(2),E("highlighted",e.role==="owner"),l(),g(" ",o.getRoleLabel(e.role)," "),l(),D(o.familyService.isAdmin()&&e.id!==o.authService.userId()&&e.role!=="owner"?12:-1)}}function Z(r,n){if(r&1&&(t(0,"div",4),x(1,Y,13,9,"div",8,Q),i()),r&2){let e=m();l(),M(e.familyService.members())}}function ee(r,n){if(r&1){let e=b();t(0,"app-empty-state",18),d("action",function(){c(e);let u=m();return s(u.inviteMember())}),i()}}function te(r,n){if(r&1){let e=b();t(0,"button",19),d("click",function(){c(e);let u=m();return s(u.leaveFamily())}),t(1,"mat-icon"),a(2,"exit_to_app"),i(),a(3," \u05E2\u05D6\u05D5\u05D1 \u05D0\u05EA \u05D4\u05DE\u05E9\u05E4\u05D7\u05D4 "),i()}}var K=class r{router=C(F);familyService=C(k);authService=C(O);roleLabels={owner:"\u05D1\u05E2\u05DC\u05D9\u05DD",admin:"\u05DE\u05E0\u05D4\u05DC",member:"\u05D7\u05D1\u05E8",viewer:"\u05E6\u05D5\u05E4\u05D4"};getInitials(n){let e=n.split(" ");return e.length>=2?e[0][0]+e[1][0]:n.substring(0,2)}getRoleLabel(n){return this.roleLabels[n]??n}inviteMember(){this.router.navigate(["/app/family/invite"])}changeRole(n,e){return f(this,null,function*(){try{yield this.familyService.updateMemberRole(n,e)}catch(o){console.error("Error changing role:",o)}})}removeMember(n){return f(this,null,function*(){try{yield this.familyService.removeMember(n)}catch(e){console.error("Error removing member:",e)}})}leaveFamily(){return f(this,null,function*(){try{yield this.familyService.leaveFamily()}catch(n){console.error("Error leaving family:",n)}})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-members"]],decls:8,vars:3,consts:[["memberMenu","matMenu"],[1,"members-page"],[1,"page-header"],["mat-flat-button","","color","primary"],[1,"members-list"],["icon","group","title","\u05D0\u05D9\u05DF \u05D7\u05D1\u05E8\u05D9\u05DD \u05D1\u05DE\u05E9\u05E4\u05D7\u05D4","description","\u05D4\u05D6\u05DE\u05D9\u05E0\u05D5 \u05D0\u05EA \u05D1\u05E0\u05D9 \u05D4\u05DE\u05E9\u05E4\u05D7\u05D4 \u05E9\u05DC\u05DB\u05DD \u05DC\u05D4\u05E6\u05D8\u05E8\u05E3","actionLabel","\u05D4\u05D6\u05DE\u05DF \u05D7\u05D1\u05E8\u05D9\u05DD","actionIcon","person_add"],["mat-button","","color","warn",1,"leave-btn"],["mat-flat-button","","color","primary",3,"click"],[1,"member-card"],[1,"member-avatar"],[1,"member-info"],[1,"member-name"],[1,"you-badge"],[1,"member-email"],[3,"highlighted"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item","",1,"danger",3,"click"],["icon","group","title","\u05D0\u05D9\u05DF \u05D7\u05D1\u05E8\u05D9\u05DD \u05D1\u05DE\u05E9\u05E4\u05D7\u05D4","description","\u05D4\u05D6\u05DE\u05D9\u05E0\u05D5 \u05D0\u05EA \u05D1\u05E0\u05D9 \u05D4\u05DE\u05E9\u05E4\u05D7\u05D4 \u05E9\u05DC\u05DB\u05DD \u05DC\u05D4\u05E6\u05D8\u05E8\u05E3","actionLabel","\u05D4\u05D6\u05DE\u05DF \u05D7\u05D1\u05E8\u05D9\u05DD","actionIcon","person_add",3,"action"],["mat-button","","color","warn",1,"leave-btn",3,"click"]],template:function(e,o){e&1&&(t(0,"div",1)(1,"header",2)(2,"h1"),a(3,"\u05D7\u05D1\u05E8\u05D9 \u05DE\u05E9\u05E4\u05D7\u05D4"),i(),_(4,U,4,0,"button",3),i(),_(5,Z,3,0,"div",4)(6,ee,1,0,"app-empty-state",5),_(7,te,4,0,"button",6),i()),e&2&&(l(4),D(o.familyService.isAdmin()?4:-1),l(),D(o.familyService.members().length>0?5:6),l(2),D(!o.familyService.isOwner()&&o.familyService.members().length>1?7:-1))},dependencies:[P,I,V,T,A,R,H,q,j,G,N,z,B,$,L,J],styles:[".members-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin:0;color:var(--text-primary)}.members-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.member-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem 1.25rem;background:var(--surface-primary);border:1px solid var(--border-subtle);border-radius:1rem}.member-avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background:var(--color-primary);color:var(--text-on-primary);display:flex;align-items:center;justify-content:center;font-weight:var(--font-weight-semibold);font-size:var(--font-size-sm)}.member-avatar.current-user[_ngcontent-%COMP%]{border:2px solid var(--color-secondary)}.member-info[_ngcontent-%COMP%]{flex:1;min-width:0}.member-info[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary)}.member-info[_ngcontent-%COMP%]   .member-name[_ngcontent-%COMP%]   .you-badge[_ngcontent-%COMP%]{font-weight:400;color:var(--text-secondary);font-size:.875rem}.member-info[_ngcontent-%COMP%]   .member-email[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}mat-chip-set[_ngcontent-%COMP%]{flex-shrink:0}.danger[_ngcontent-%COMP%]{color:var(--color-error)!important}.leave-btn[_ngcontent-%COMP%]{display:flex;margin:1rem auto 0}.leave-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-inline-end:.5rem}"]})};export{K as MembersComponent};
