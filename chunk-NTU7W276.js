import{a as H}from"./chunk-FGKJJLPL.js";import{a as B}from"./chunk-UAW6TWS3.js";import{a as T,b as I}from"./chunk-BCPCSMU2.js";import"./chunk-X4QG5DAP.js";import{a as b,d as S,e as w,f as A}from"./chunk-SXGBHULN.js";import"./chunk-EB5YHKWW.js";import"./chunk-JFU3JZIN.js";import{d as h,i as O}from"./chunk-TWWUOU6R.js";import{j as M,k as P}from"./chunk-OJNKK6II.js";import{Ab as _,Cb as i,Db as n,Eb as C,Rb as d,Sa as a,Y as x,bc as E,dc as e,ec as D,fb as y,fc as c,gc as f,pc as u,qc as l,vb as p,wb as s,zb as g}from"./chunk-QZLPLYI5.js";import{f as v}from"./chunk-ATWMZ64T.js";var k=(o,r)=>r.id,z=(o,r)=>r.month;function F(o,r){o&1&&(i(0,"div",4),C(1,"mat-spinner",6),i(2,"p"),e(3,"\u05D8\u05D5\u05E2\u05DF \u05D4\u05D9\u05E1\u05D8\u05D5\u05E8\u05D9\u05D4..."),n()())}function L(o,r){o&1&&e(0," \u05D4\u05E2\u05E8\u05DB\u05D5\u05EA \u05E9\u05DC\u05DA \u05E0\u05DE\u05D5\u05DB\u05D5\u05EA \u05DE\u05D4\u05DE\u05D7\u05D9\u05E8 \u05D1\u05E4\u05D5\u05E2\u05DC ")}function $(o,r){o&1&&e(0," \u05D4\u05E2\u05E8\u05DB\u05D5\u05EA \u05E9\u05DC\u05DA \u05D2\u05D1\u05D5\u05D4\u05D5\u05EA \u05DE\u05D4\u05DE\u05D7\u05D9\u05E8 \u05D1\u05E4\u05D5\u05E2\u05DC ")}function j(o,r){o&1&&e(0," \u05D4\u05E2\u05E8\u05DB\u05D5\u05EA \u05DE\u05D3\u05D5\u05D9\u05E7\u05D5\u05EA! ")}function N(o,r){if(o&1&&(i(0,"div",23)(1,"span",24),e(2),n(),i(3,"span",25),e(4),u(5,"number"),n(),i(6,"span",26),e(7),u(8,"number"),n(),i(9,"span",27),e(10),n()()),o&2){let t=r.$implicit;a(2),D(t.monthLabel),a(2),c("\u20AA",l(5,4,t.totalEstimated,"1.0-0")),a(3),c("\u20AA",l(8,7,t.totalActual,"1.0-0")),a(3),D(t.tripCount)}}function R(o,r){if(o&1&&(i(0,"div",17)(1,"h2"),e(2,"\u05D4\u05D5\u05E6\u05D0\u05D5\u05EA \u05D7\u05D5\u05D3\u05E9\u05D9\u05D5\u05EA"),n(),i(3,"div",21)(4,"div",22)(5,"span"),e(6,"\u05D7\u05D5\u05D3\u05E9"),n(),i(7,"span"),e(8,"\u05DE\u05E9\u05D5\u05E2\u05E8"),n(),i(9,"span"),e(10,"\u05D1\u05E4\u05D5\u05E2\u05DC"),n(),i(11,"span"),e(12,"\u05E7\u05E0\u05D9\u05D5\u05EA"),n()(),g(13,N,11,10,"div",23,z),n()()),o&2){let t=d(2);a(13),_(t.historyService.monthlySpending())}}function q(o,r){if(o&1&&(e(0),u(1,"number")),o&2){let t=d().$implicit;c(" +\u20AA",l(1,1,t.actualTotal-t.estimatedTotal,"1.0-0")," ")}}function G(o,r){if(o&1&&(e(0),u(1,"number")),o&2){let t=d().$implicit;c(" -\u20AA",l(1,1,t.estimatedTotal-t.actualTotal,"1.0-0")," ")}}function J(o,r){o&1&&e(0," = ")}function K(o,r){if(o&1&&(i(0,"div",20)(1,"div",28),e(2),n(),i(3,"div",29)(4,"div",30)(5,"span",31),e(6,"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD"),n(),i(7,"span",32),e(8),n()(),i(9,"div",30)(10,"span",31),e(11,"\u05DE\u05E9\u05D5\u05E2\u05E8"),n(),i(12,"span",33),e(13),u(14,"number"),n()(),i(15,"div",30)(16,"span",31),e(17,"\u05D1\u05E4\u05D5\u05E2\u05DC"),n(),i(18,"span",34),e(19),u(20,"number"),n()()(),i(21,"div",35),p(22,q,2,4)(23,G,2,4)(24,J,1,0),n()()),o&2){let t=r.$implicit,m=d(2);a(2),c(" ",m.formatDate(m.getTripDate(t))," "),a(6),f("",t.checkedItems,"/",t.totalItems),a(5),c("\u20AA",l(14,10,t.estimatedTotal,"1.0-0")),a(6),c("\u20AA",l(20,13,t.actualTotal,"1.0-0")),a(2),E("over",t.actualTotal>t.estimatedTotal)("under",t.actualTotal<t.estimatedTotal),a(),s(t.actualTotal>t.estimatedTotal?22:t.actualTotal<t.estimatedTotal?23:24)}}function Q(o,r){if(o&1&&(i(0,"div",7)(1,"div",8)(2,"mat-icon"),e(3,"receipt_long"),n(),i(4,"div",9)(5,"span",10),e(6),n(),i(7,"span",11),e(8,"\u05E1\u05D9\u05D1\u05D5\u05D1\u05D9 \u05E7\u05E0\u05D9\u05D5\u05EA"),n()()(),i(9,"div",8)(10,"mat-icon"),e(11,"payments"),n(),i(12,"div",9)(13,"span",10),e(14),u(15,"number"),n(),i(16,"span",11),e(17,'\u05E1\u05D4"\u05DB \u05D4\u05D5\u05E6\u05D0\u05D5\u05EA'),n()()(),i(18,"div",8)(19,"mat-icon"),e(20,"analytics"),n(),i(21,"div",9)(22,"span",10),e(23),u(24,"number"),n(),i(25,"span",11),e(26,"\u05DE\u05DE\u05D5\u05E6\u05E2 \u05DC\u05E7\u05E0\u05D9\u05D4"),n()()()(),i(27,"div",12)(28,"div",13)(29,"div",14),e(30,"\u05D3\u05D9\u05D5\u05E7 \u05D4\u05E2\u05E8\u05DB\u05D5\u05EA"),n(),i(31,"div",15),e(32),n()(),i(33,"p",16),p(34,L,1,0)(35,$,1,0)(36,j,1,0),n()(),p(37,R,15,0,"div",17),i(38,"div",18)(39,"h2"),e(40,"\u05E7\u05E0\u05D9\u05D5\u05EA \u05D0\u05D7\u05E8\u05D5\u05E0\u05D5\u05EA"),n(),i(41,"div",19),g(42,K,25,16,"div",20,k),n()()),o&2){let t=d();a(6),D(t.historyService.totalStats().totalTrips),a(8),c("\u20AA",l(15,10,t.historyService.totalStats().totalActual,"1.0-0")),a(9),c("\u20AA",l(24,13,t.historyService.totalStats().averageTrip,"1.0-0")),a(8),E("over",t.historyService.estimateAccuracy()>100)("under",t.historyService.estimateAccuracy()<100),a(),c(" ",t.historyService.estimateAccuracy(),"% "),a(2),s(t.historyService.estimateAccuracy()>100?34:t.historyService.estimateAccuracy()<100?35:36),a(3),s(t.historyService.monthlySpending().length>0?37:-1),a(5),_(t.historyService.history())}}function U(o,r){o&1&&C(0,"app-empty-state",5)}var V=class o{historyService=x(H);ngOnInit(){return v(this,null,function*(){yield this.historyService.loadHistory()})}getTripDate(r){let t=r.completedAt??r.createdAt;return t?t.toDate():new Date}formatDate(r){return r.toLocaleDateString("he-IL",{day:"numeric",month:"short"})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=y({type:o,selectors:[["app-history-view"]],decls:11,vars:1,consts:[[1,"history-page"],[1,"page-header"],[1,"header-top"],["mat-icon-button","","routerLink","../"],[1,"loading-container"],["icon","history","title","\u05D0\u05D9\u05DF \u05D4\u05D9\u05E1\u05D8\u05D5\u05E8\u05D9\u05D4","description","\u05E1\u05D9\u05D9\u05DE\u05D5 \u05E7\u05E0\u05D9\u05D5\u05EA \u05DB\u05D3\u05D9 \u05DC\u05E8\u05D0\u05D5\u05EA \u05D0\u05EA \u05D4\u05D9\u05E1\u05D8\u05D5\u05E8\u05D9\u05D9\u05EA \u05D4\u05D4\u05D5\u05E6\u05D0\u05D5\u05EA \u05E9\u05DC\u05DB\u05DD"],["diameter","40"],[1,"summary-section"],[1,"stat-card"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"accuracy-section"],[1,"accuracy-bar"],[1,"accuracy-label"],[1,"accuracy-value"],[1,"accuracy-hint"],[1,"monthly-section"],[1,"trips-section"],[1,"trips-list"],[1,"trip-card"],[1,"monthly-table"],[1,"table-header"],[1,"table-row"],[1,"month-label"],[1,"estimated"],[1,"actual"],[1,"count"],[1,"trip-date"],[1,"trip-details"],[1,"trip-row"],[1,"trip-label"],[1,"trip-value"],[1,"trip-value","estimated"],[1,"trip-value","actual"],[1,"trip-diff"]],template:function(t,m){t&1&&(i(0,"div",0)(1,"header",1)(2,"div",2)(3,"button",3)(4,"mat-icon"),e(5,"arrow_forward"),n()(),i(6,"h1"),e(7,"\u05D4\u05D9\u05E1\u05D8\u05D5\u05E8\u05D9\u05D9\u05EA \u05E7\u05E0\u05D9\u05D5\u05EA"),n()()(),p(8,F,4,0,"div",4)(9,Q,44,16)(10,U,1,0,"app-empty-state",5),n()),t&2&&(a(8),s(m.historyService.isLoading()?8:m.historyService.history().length>0?9:10))},dependencies:[P,O,h,S,b,A,w,I,T,B,M],styles:[".history-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.page-header[_ngcontent-%COMP%]   .header-top[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.page-header[_ngcontent-%COMP%]   .header-top[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin:0;color:var(--text-primary)}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;gap:1rem}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}.summary-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:.75rem}@media(max-width:480px){.summary-section[_ngcontent-%COMP%]{grid-template-columns:1fr}}.stat-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem;background:var(--surface-primary);border:1px solid var(--border-subtle);border-radius:.75rem}.stat-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px;color:var(--color-primary)}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;color:var(--text-primary)}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary)}.accuracy-section[_ngcontent-%COMP%]{padding:1rem;background:var(--surface-primary);border:1px solid var(--border-subtle);border-radius:.75rem}.accuracy-section[_ngcontent-%COMP%]   .accuracy-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.accuracy-section[_ngcontent-%COMP%]   .accuracy-label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary)}.accuracy-section[_ngcontent-%COMP%]   .accuracy-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700}.accuracy-section[_ngcontent-%COMP%]   .accuracy-value.over[_ngcontent-%COMP%]{color:var(--color-error)}.accuracy-section[_ngcontent-%COMP%]   .accuracy-value.under[_ngcontent-%COMP%]{color:var(--color-success)}.accuracy-section[_ngcontent-%COMP%]   .accuracy-hint[_ngcontent-%COMP%]{margin:.5rem 0 0;font-size:.8125rem;color:var(--text-secondary)}.monthly-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .trips-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin:0 0 .75rem;color:var(--text-primary)}.monthly-table[_ngcontent-%COMP%]{background:var(--surface-primary);border:1px solid var(--border-subtle);border-radius:.75rem;overflow:hidden}.table-header[_ngcontent-%COMP%], .table-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr repeat(3,80px);padding:.75rem 1rem;gap:.5rem;text-align:end}.table-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child, .table-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{text-align:start}.table-header[_ngcontent-%COMP%]{background:var(--surface-secondary);font-size:.75rem;font-weight:600;color:var(--text-secondary);text-transform:uppercase}.table-row[_ngcontent-%COMP%]{border-top:1px solid var(--border-subtle)}.table-row[_ngcontent-%COMP%]   .month-label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary)}.table-row[_ngcontent-%COMP%]   .estimated[_ngcontent-%COMP%]{color:var(--text-secondary)}.table-row[_ngcontent-%COMP%]   .actual[_ngcontent-%COMP%]{font-weight:600;color:var(--color-primary)}.table-row[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{color:var(--text-secondary)}.trips-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.trip-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;background:var(--surface-primary);border:1px solid var(--border-subtle);border-radius:.75rem}.trip-card[_ngcontent-%COMP%]   .trip-date[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--text-primary);min-width:80px}.trip-card[_ngcontent-%COMP%]   .trip-details[_ngcontent-%COMP%]{flex:1;display:flex;gap:1rem;flex-wrap:wrap}.trip-card[_ngcontent-%COMP%]   .trip-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.125rem}.trip-card[_ngcontent-%COMP%]   .trip-row[_ngcontent-%COMP%]   .trip-label[_ngcontent-%COMP%]{font-size:.6875rem;color:var(--text-tertiary)}.trip-card[_ngcontent-%COMP%]   .trip-row[_ngcontent-%COMP%]   .trip-value[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-primary)}.trip-card[_ngcontent-%COMP%]   .trip-row[_ngcontent-%COMP%]   .trip-value.estimated[_ngcontent-%COMP%]{color:var(--text-secondary)}.trip-card[_ngcontent-%COMP%]   .trip-row[_ngcontent-%COMP%]   .trip-value.actual[_ngcontent-%COMP%]{font-weight:600;color:var(--color-primary)}.trip-card[_ngcontent-%COMP%]   .trip-diff[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;padding:.25rem .5rem;border-radius:.375rem}.trip-card[_ngcontent-%COMP%]   .trip-diff.over[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--color-error) 10%,transparent);color:var(--color-error)}.trip-card[_ngcontent-%COMP%]   .trip-diff.under[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--color-success) 10%,transparent);color:var(--color-success)}"]})};export{V as HistoryViewComponent};
