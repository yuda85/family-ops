import{a as _,b as ie}from"./chunk-QHOC456L.js";import{b as te}from"./chunk-O6HJ35IU.js";import{a as ee}from"./chunk-KMKHW2SX.js";import"./chunk-RJL43Y7W.js";import"./chunk-HS2XTPUM.js";import{a as re}from"./chunk-4Q6TRDAS.js";import"./chunk-QJJTVXVB.js";import{d as oe}from"./chunk-X4QG5DAP.js";import"./chunk-EB5YHKWW.js";import{g as ne,j as f}from"./chunk-JFU3JZIN.js";import{b as q,c as J,f as K,g as Q,h as $}from"./chunk-TWWUOU6R.js";import{k as h,n as W,o as X}from"./chunk-OJNKK6II.js";import{Ac as Y,Bb as j,Ca as T,Eb as v,Fb as C,Gb as A,Hb as G,Q as M,Rb as B,Sa as p,T as S,W as w,Wa as N,Y as a,Z as P,Za as z,ab as L,ac as V,bc as U,dc as Z,ec as H,fa as O,fb as c,ga as R,ka as x,na as D,pa as E,qb as k,vb as m,wb as u}from"./chunk-QZLPLYI5.js";import{f as b}from"./chunk-ATWMZ64T.js";var ce="@",me=(()=>{class i{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=a(O);loadingSchedulerFn=a(ue,{optional:!0});_engine;constructor(e,n,o,r,s){this.doc=e,this.delegate=n,this.zone=o,this.animationType=r,this.moduleImpl=s}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-NRG4K735.js").then(o=>o),n;return this.loadingSchedulerFn?n=this.loadingSchedulerFn(e):n=e(),n.catch(o=>{throw new M(5300,!1)}).then(({\u0275createEngine:o,\u0275AnimationRendererFactory:r})=>{this._engine=o(this.animationType,this.doc);let s=new r(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(e,n){let o=this.delegate.createRenderer(e,n);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let r=new F(o);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(s=>{let l=s.createRenderer(e,n);r.use(l),this.scheduler??=this.injector.get(E,null,{optional:!0}),this.scheduler?.notify(10)}).catch(s=>{r.use(o)}),r}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e)}static \u0275fac=function(n){L()};static \u0275prov=S({token:i,factory:i.\u0275fac})}return i})(),F=class{delegate;replay=[];\u0275type=1;constructor(t){this.delegate=t}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,n,o){this.delegate.insertBefore(t,e,n,o)}removeChild(t,e,n,o){this.delegate.removeChild(t,e,n,o)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,o){this.delegate.setAttribute(t,e,n,o)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,o){this.delegate.setStyle(t,e,n,o)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){this.shouldReplay(e)&&this.replay.push(o=>o.setProperty(t,e,n)),this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n,o){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(t,e,n,o)),this.delegate.listen(t,e,n,o)}shouldReplay(t){return this.replay!==null&&t.startsWith(ce)}},ue=new w("");function se(i="animations"){return N("NgAsyncAnimations"),P([{provide:z,useFactory:()=>new me(a(R),a(W),a(x),i)},{provide:T,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var le=(i,t)=>b(null,null,function*(){let e=a(f),n=a(oe),o=a(J);if(e.isInitialized()||(yield new Promise(d=>{let I=()=>{e.isInitialized()?d():setTimeout(I,50)};I()})),!e.isAuthenticated())return o.navigate(["/auth/login"]),!1;let r=e.user(),s=e.activeFamilyId();if(!r||Object.keys(r.familyMemberships).length===0)return o.navigate(["/family-select"]),!1;if(!s){let d=Object.keys(r.familyMemberships);if(d.length===1)yield e.setActiveFamily(d[0]);else return o.navigate(["/family-select"]),!1}let l=e.activeFamilyId();if(l&&r.familyMemberships[l]){if(n.familyId()!==l)try{yield n.loadFamily(l)}catch(d){return console.error("Error loading family:",d),o.navigate(["/family-select"]),!1}return!0}return o.navigate(["/family-select"]),!1});var de=[{path:"",loadComponent:()=>import("./chunk-RGTKVU36.js").then(i=>i.LandingComponent),canActivate:[ie],pathMatch:"full",title:"FamilyOps - \u05E0\u05D9\u05D4\u05D5\u05DC \u05DE\u05E9\u05E4\u05D7\u05EA\u05D9 \u05D7\u05DB\u05DD"},{path:"auth",loadChildren:()=>import("./chunk-5K2BXRHC.js")},{path:"family-select",loadComponent:()=>import("./chunk-A6ZC2FQE.js").then(i=>i.FamilySelectComponent),canActivate:[_],title:"\u05D1\u05D7\u05D9\u05E8\u05EA \u05DE\u05E9\u05E4\u05D7\u05D4 - FamilyOps"},{path:"accept-invite/:inviteId",loadComponent:()=>import("./chunk-2W3PZVVK.js").then(i=>i.AcceptInviteComponent),title:"\u05E7\u05D1\u05DC \u05D4\u05D6\u05DE\u05E0\u05D4 - FamilyOps"},{path:"app",loadComponent:()=>import("./chunk-45H7KWIN.js").then(i=>i.MainLayoutComponent),canActivate:[_,le],children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",loadChildren:()=>import("./chunk-BYS5PXCV.js")},{path:"calendar",loadChildren:()=>import("./chunk-TFSXRPMP.js")},{path:"transportation",loadChildren:()=>import("./chunk-QMUU264X.js")},{path:"shopping",loadChildren:()=>import("./chunk-WOPOBX34.js")},{path:"topics",loadChildren:()=>import("./chunk-RVKYP6I6.js")},{path:"family",loadChildren:()=>import("./chunk-GX5GHLKW.js")},{path:"settings",loadChildren:()=>import("./chunk-QGQEGLL2.js")}]},{path:"**",redirectTo:"app"}];function he(){return()=>new Promise(i=>{ne(),i()})}var pe={providers:[D(),Y({eventCoalescing:!0}),K(de,Q(),$()),se(),te(),{provide:ee,useValue:"en-GB"},{provide:k,useFactory:he,multi:!0}]};function ge(i,t){if(i&1&&(C(0,"p",3),Z(1),A()),i&2){let e=B();p(),H(e.message)}}var g=class i{size=32;message;fullscreen=!1;overlay=!1;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=c({type:i,selectors:[["app-loading-spinner"]],inputs:{size:"size",message:"message",fullscreen:"fullscreen",overlay:"overlay"},decls:4,vars:9,consts:[[1,"loading-container"],[1,"spinner-wrapper"],[1,"spinner"],[1,"loading-message"]],template:function(e,n){e&1&&(C(0,"div",0)(1,"div",1),G(2,"div",2),m(3,ge,2,1,"p",3),A()()),e&2&&(U("fullscreen",n.fullscreen)("overlay",n.overlay),p(2),V("width",n.size,"px")("height",n.size,"px"),p(),u(n.message?3:-1))},dependencies:[h],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:2rem}.loading-container.fullscreen[_ngcontent-%COMP%]{position:fixed;inset:0;background:var(--surface-app);z-index:9999}.loading-container.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:var(--surface-overlay);z-index:100}.spinner-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}.spinner[_ngcontent-%COMP%]{border:3px solid var(--border-default);border-top-color:var(--color-primary);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.loading-message[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem;margin:0}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};function ye(i,t){i&1&&v(0,"app-loading-spinner",0),i&2&&j("fullscreen",!0)}function ve(i,t){i&1&&v(0,"router-outlet")}var y=class i{authService=a(f);themeService=a(re);ngOnInit(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=c({type:i,selectors:[["app-root"]],decls:2,vars:1,consts:[["message","\u05D8\u05D5\u05E2\u05DF...",3,"fullscreen"]],template:function(e,n){e&1&&m(0,ye,1,1,"app-loading-spinner",0)(1,ve,1,0,"router-outlet"),e&2&&u(n.authService.isLoading()?0:1)},dependencies:[h,q,g],styles:["[_nghost-%COMP%]{display:block;min-height:100vh}"]})};X(y,pe).catch(i=>console.error(i));
