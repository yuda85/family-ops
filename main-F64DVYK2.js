import{a as _}from"./chunk-D2LJI4F6.js";import{a as re}from"./chunk-GYCTFNZ4.js";import{b as te}from"./chunk-5XPVWHDB.js";import{a as ee}from"./chunk-PKY75QXD.js";import"./chunk-KOZG2KWN.js";import"./chunk-QNNGT5BD.js";import"./chunk-GY27VXU3.js";import{d as ie}from"./chunk-WPQFOBGJ.js";import"./chunk-ZOWI4QAM.js";import{b as q,c as J,f as K,g as Q,h as $}from"./chunk-HH43CGJO.js";import{g as ne,j as f}from"./chunk-IGP4P7SY.js";import{j as h,m as W,n as X}from"./chunk-3EH3MU74.js";import{Bb as j,Ca as T,Eb as v,Fb as C,Gb as A,Hb as G,Q as M,Rb as B,Sa as p,T as S,W as w,Wa as N,Y as a,Z as P,Za as z,ab as L,ac as V,bc as U,dc as Z,ec as H,fa as O,fb as c,ga as R,ka as x,na as D,pa as E,qb as k,vb as m,wb as u,zc as Y}from"./chunk-HNLZOKXJ.js";import{f as b}from"./chunk-ATWMZ64T.js";var pe="@",ce=(()=>{class i{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=a(O);loadingSchedulerFn=a(me,{optional:!0});_engine;constructor(e,n,r,o,s){this.doc=e,this.delegate=n,this.zone=r,this.animationType=o,this.moduleImpl=s}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-G4GY2IGO.js").then(r=>r),n;return this.loadingSchedulerFn?n=this.loadingSchedulerFn(e):n=e(),n.catch(r=>{throw new M(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:o})=>{this._engine=r(this.animationType,this.doc);let s=new o(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(e,n){let r=this.delegate.createRenderer(e,n);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let o=new F(r);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(s=>{let l=s.createRenderer(e,n);o.use(l),this.scheduler??=this.injector.get(E,null,{optional:!0}),this.scheduler?.notify(10)}).catch(s=>{o.use(r)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e)}static \u0275fac=function(n){L()};static \u0275prov=S({token:i,factory:i.\u0275fac})}return i})(),F=class{delegate;replay=[];\u0275type=1;constructor(t){this.delegate=t}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,n,r){this.delegate.insertBefore(t,e,n,r)}removeChild(t,e,n,r){this.delegate.removeChild(t,e,n,r)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(t,e,n)),this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n,r){return this.shouldReplay(e)&&this.replay.push(o=>o.listen(t,e,n,r)),this.delegate.listen(t,e,n,r)}shouldReplay(t){return this.replay!==null&&t.startsWith(pe)}},me=new w("");function ae(i="animations"){return N("NgAsyncAnimations"),P([{provide:z,useFactory:()=>new ce(a(R),a(W),a(x),i)},{provide:T,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var se=(i,t)=>b(null,null,function*(){let e=a(f),n=a(ie),r=a(J);if(e.isInitialized()||(yield new Promise(d=>{let I=()=>{e.isInitialized()?d():setTimeout(I,50)};I()})),!e.isAuthenticated())return r.navigate(["/auth/login"]),!1;let o=e.user(),s=e.activeFamilyId();if(!o||Object.keys(o.familyMemberships).length===0)return r.navigate(["/family-select"]),!1;if(!s){let d=Object.keys(o.familyMemberships);if(d.length===1)yield e.setActiveFamily(d[0]);else return r.navigate(["/family-select"]),!1}let l=e.activeFamilyId();if(l&&o.familyMemberships[l]){if(n.familyId()!==l)try{yield n.loadFamily(l)}catch(d){return console.error("Error loading family:",d),r.navigate(["/family-select"]),!1}return!0}return r.navigate(["/family-select"]),!1});var le=[{path:"",redirectTo:"app",pathMatch:"full"},{path:"auth",loadChildren:()=>import("./chunk-EDMBENMY.js")},{path:"family-select",loadComponent:()=>import("./chunk-IRKYAPFU.js").then(i=>i.FamilySelectComponent),canActivate:[_],title:"\u05D1\u05D7\u05D9\u05E8\u05EA \u05DE\u05E9\u05E4\u05D7\u05D4 - FamilyOps"},{path:"accept-invite/:inviteId",loadComponent:()=>import("./chunk-52D6QZGY.js").then(i=>i.AcceptInviteComponent),title:"\u05E7\u05D1\u05DC \u05D4\u05D6\u05DE\u05E0\u05D4 - FamilyOps"},{path:"app",loadComponent:()=>import("./chunk-CKI7W7FH.js").then(i=>i.MainLayoutComponent),canActivate:[_,se],children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",loadChildren:()=>import("./chunk-4M5O4LK6.js")},{path:"calendar",loadChildren:()=>import("./chunk-DMGUW4DV.js")},{path:"shopping",loadChildren:()=>import("./chunk-H3S5J66J.js")},{path:"topics",loadChildren:()=>import("./chunk-X6RFUEUQ.js")},{path:"family",loadChildren:()=>import("./chunk-OVYOHXKA.js")},{path:"settings",loadChildren:()=>import("./chunk-765VTM2I.js")}]},{path:"**",redirectTo:"app"}];function ue(){return()=>new Promise(i=>{ne(),i()})}var de={providers:[D(),Y({eventCoalescing:!0}),K(le,Q(),$()),ae(),te(),{provide:ee,useValue:"en-GB"},{provide:k,useFactory:ue,multi:!0}]};function fe(i,t){if(i&1&&(C(0,"p",3),Z(1),A()),i&2){let e=B();p(),H(e.message)}}var g=class i{size=32;message;fullscreen=!1;overlay=!1;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=c({type:i,selectors:[["app-loading-spinner"]],inputs:{size:"size",message:"message",fullscreen:"fullscreen",overlay:"overlay"},decls:4,vars:9,consts:[[1,"loading-container"],[1,"spinner-wrapper"],[1,"spinner"],[1,"loading-message"]],template:function(e,n){e&1&&(C(0,"div",0)(1,"div",1),G(2,"div",2),m(3,fe,2,1,"p",3),A()()),e&2&&(U("fullscreen",n.fullscreen)("overlay",n.overlay),p(2),V("width",n.size,"px")("height",n.size,"px"),p(),u(n.message?3:-1))},dependencies:[h],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:2rem}.loading-container.fullscreen[_ngcontent-%COMP%]{position:fixed;inset:0;background:var(--surface-app);z-index:9999}.loading-container.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:var(--surface-overlay);z-index:100}.spinner-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}.spinner[_ngcontent-%COMP%]{border:3px solid var(--border-default);border-top-color:var(--color-primary);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.loading-message[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem;margin:0}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};function ge(i,t){i&1&&v(0,"app-loading-spinner",0),i&2&&j("fullscreen",!0)}function ye(i,t){i&1&&v(0,"router-outlet")}var y=class i{authService=a(f);themeService=a(re);ngOnInit(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=c({type:i,selectors:[["app-root"]],decls:2,vars:1,consts:[["message","\u05D8\u05D5\u05E2\u05DF...",3,"fullscreen"]],template:function(e,n){e&1&&m(0,ge,1,1,"app-loading-spinner",0)(1,ye,1,0,"router-outlet"),e&2&&u(n.authService.isLoading()?0:1)},dependencies:[h,q,g],styles:["[_nghost-%COMP%]{display:block;min-height:100vh}"]})};X(y,de).catch(i=>console.error(i));
